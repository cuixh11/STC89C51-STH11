C51 COMPILER V9.02   LCD1602                                                               04/02/2022 12:21:45 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN ..\output\LCD1602.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\src\LCD1602.c BROWSE INCDIR(..\inc) DEBUG OBJECTEXTEND PRINT(.\LCD1602.l
                    -st) OBJECT(..\output\LCD1602.obj)

line level    source

   1          /*
   2          *******************************************************************************
   3          *Œƒ º˛ √˚£∫LCD1602.c
   4          *√Ë     ˆ£∫µ⁄“ª≤ø∑÷LCD1602…Ë÷√
   5          *  ∞Ê±æ∫≈£∫v1.0.0  
   6          ;Œ¢¥¶¿Ì∆˜: STC89C51
   7          ;±‡“Îª∑æ≥: Keil uVision V4.10 
   8          ;◊˜    ’ﬂ: Cui Xinghai 
   9          ;¥¥Ω®»’∆⁄: 2022.2.24   
  10          ; ±∏   ◊¢£∫
  11          *******************************************************************************
  12          */
  13          
  14          #define  _LCD1602_C
  15          
  16          #include <intrins.h> //”¶”√”⁄≥Ã–Ú…Ëº∆£¨“ª∞„≥ˆC51µ•∆¨ª˙±‡≥Ã÷–£¨“ª∞„≥Ã–Ú÷––Ë“™ π”√µΩø’÷∏¡Ó_nop_();◊÷∑˚—≠ª∑“∆
             -Œª÷∏¡Ó_crol_µ» ± π”√°£
  17          #include <reg52.h>
  18          #include "LCD1602.h"
  19          
  20          //*********************µ⁄“ª≤ø∑÷LCD1602…Ë÷√ START****************************************
  21          /*-------------------------------------- 
  22          ;ƒ£øÈ√˚≥∆:LCD_init(); 
  23          ;π¶    ƒ‹:≥ı ºªØLCD1602 
  24          ;-------------------------------------*/ 
  25          void LCD_init(void)             //¿®∫≈÷–µƒvoid“‚Àº∏√∫Ø ˝µƒ≤Œ ˝Œ™ø’
  26          {
  27   1      delay_n10us(10);
  28   1      LCD_write_command(0x38);//÷∏¡Ó6£∫π§◊˜∑Ω Ω…Ë÷√÷∏¡Ó£¨0x0011 1000…Ë÷√8Œª∏Ò Ω ˝æ›Ω”ø⁄£¨16*2––œ‘ æ£¨5x7µ„’Û
  29   1      delay_n10us(10);
  30   1      LCD_write_command(0x0c);//÷∏¡Ó4:
  31   1                                                      //’˚ÃÂœ‘ æ£¨πÿπ‚±Í£¨≤ª…¡À∏£¨BCD0x00001 100
  32   1                                                      //’˚ÃÂœ‘ æ£¨ø™π‚±Í£¨  …¡À∏£¨BCD0x00001 111
  33   1      delay_n10us(10);
  34   1      LCD_write_command(0x06);//÷∏¡Ó3£∫…Ë∂® ‰»Î∑Ω Ω‘ˆ¡ø≤ª“∆Œª,    0x00000110
  35   1      delay_n10us(10);
  36   1      LCD_write_command(0x01);//÷∏¡Ó1£∫«Â≥˝∆¡ƒªœ‘ æ,π‚±Í∏¥ŒªµΩµÿ÷∑00HŒª÷√
  37   1      delay_n10us(100);       //—” ±«Â∆¡£¨—” ±∫Ø ˝£¨—” ±‘ºn∏ˆ10us
  38   1      }
  39          
  40          
  41          /*-------------------------------------- 
  42          ;ƒ£øÈ√˚≥∆:LCD_write_command(); 
  43          ;π¶    ƒ‹:LCD1602–¥÷∏¡Ó∫Ø ˝ 
  44          ;’º”√◊ ‘¥: P2.0--RS(LCD_RS),P2.1--RW(LCD_RW),P2.2--E(LCD_E).
  45          ;≤Œ ˝Àµ√˜:datŒ™–¥√¸¡Ó≤Œ ˝
  46          ;-------------------------------------*/ 
  47          void LCD_write_command(uchar dat)
  48          {
  49   1      delay_n10us(10);
  50   1      LCD_RS=0;         //÷∏¡Ó
  51   1      LCD_RW=0;         //–¥»Î
  52   1      LCD_E=1;          //‘ –Ì
  53   1      LCD_DB=dat;
C51 COMPILER V9.02   LCD1602                                                               04/02/2022 12:21:45 PAGE 2   

  54   1      delay_n10us(10);  // µº˘÷§√˜£¨Œ“µƒLCD1602…œ£¨”√for—≠ª∑1¥ŒæÕƒ‹ÕÍ≥…∆’Õ®–¥÷∏¡Ó°£
  55   1      LCD_E=0;                  //∂¡ÕÍ≥∑œ˙ πƒ‹£¨∑¿÷π“∫æß ‰≥ˆ ˝æ›∏…»≈ P0 ◊‹œﬂ 
  56   1      delay_n10us(10);  // µº˘÷§√˜£¨LCD1602…œ£¨”√for—≠ª∑1¥ŒæÕƒ‹ÕÍ≥…∆’Õ®–¥÷∏¡Ó°£
  57   1      }
  58          
  59          
  60          /*-------------------------------------- 
  61          ;ƒ£øÈ√˚≥∆:LCD_write_data(); 
  62          ;π¶    ƒ‹:LCD1602–¥ ˝æ›∫Ø ˝ 
  63          ;’º”√◊ ‘¥: P2.0--RS(LCD_RS),P2.1--RW(LCD_RW),P2.2--E(LCD_E).
  64          ;≤Œ ˝Àµ√˜:datŒ™–¥ ˝æ›≤Œ ˝
  65          ;-------------------------------------*/
  66          void LCD_write_data(uchar dat)
  67          {
  68   1      delay_n10us(10);
  69   1      LCD_RS=1;          // ˝æ›
  70   1      LCD_RW=0;          //–¥»Î
  71   1      LCD_E=1;           //‘ –Ì
  72   1      LCD_DB=dat;
  73   1      delay_n10us(10);
  74   1      LCD_E=0;
  75   1      delay_n10us(10);
  76   1      }
  77          
  78          
  79          /*-------------------------------------- 
  80          ;ƒ£øÈ√˚≥∆:LCD_disp_char(); 
  81          ;π¶    ƒ‹:π‚±ÍŒª÷√£¨LCD1602œ‘ æ“ª∏ˆ◊÷∑˚∫Ø ˝£¨‘⁄ƒ≥∏ˆ∆¡ƒªŒª÷√…œœ‘ æ“ª∏ˆ◊÷∑˚,X£®0-15),y(1-2)°£
  82          ;≤Œ ˝Àµ√˜:XŒ™1602µƒ¡–÷µ(»°÷µ∑∂Œß «0-15),yŒ™1602µƒ––÷µ(»°÷µ∑∂Œß «1-2)£¨datŒ™À˘“™œ‘ æ◊÷∑˚∂‘”¶µƒµÿ÷∑≤Œ ˝°£
  83          ;-------------------------------------*/
  84          void LCD_disp_char(uchar x,uchar y,uchar dat)
  85          {
  86   1        uchar address;
  87   1        if(y==1)                               //0x80∫Õ00Hµƒ«¯±£∫÷∏¡Ó7
  88   1               address=0x80+x; //∂˛Ω¯÷∆¬Î÷–µ⁄“ª–– ◊µÿ÷∑Œ™10000000◊™ªª16Ω¯÷∆Œ™0x80,µ⁄∂˛–– ◊µÿ÷∑Œ™11000000◊™ªª16Ω¯
             -÷∆Œ™0xC0 º” ◊µÿ÷∑ «Œ™¡À»√LCDœ‘ æ¥”µ⁄“ªŒªø™ ºœ‘ æ°£
  89   1        else
  90   1               address=0xc0+x;
  91   1        LCD_write_command(address);
  92   1        LCD_write_data(dat);
  93   1      }
  94          
  95          
  96          
  97          /*-------------------------------------- 
  98          ;ƒ£øÈ√˚≥∆:LCD_disp_str(); 
  99          ;π¶    ƒ‹:LCD1602œ‘ æ◊÷∑˚¥Æ∫Ø ˝£¨‘⁄ƒ≥∏ˆ∆¡ƒª∆ ºŒª÷√{X£®0-15),y(1-2)}…œœ‘ æ“ª∏ˆ◊÷∑˚¥Æ°£
 100          ;≤Œ ˝Àµ√˜:XŒ™1602µƒ¡–÷µ(»°÷µ∑∂Œß «0-15),yŒ™1602µƒ––÷µ(»°÷µ∑∂Œß «1-2)£¨strŒ™À˘“™œ‘ æ◊÷∑˚¥Æ∂‘”¶µƒ÷∏’Î≤Œ ˝°£
 101          ;-------------------------------------*/
 102          void LCD_disp_str(uchar x,uchar y,uchar *str)
 103          {
 104   1        uchar address;
 105   1        if(y==1)
 106   1               address=0x80+x;
 107   1        else
 108   1               address=0xc0+x;
 109   1        LCD_write_command(address);  //¡¨–¯–¥»Î◊÷∑˚¥Æ ˝æ›£¨÷±µΩºÏ≤‚µΩΩ· ¯∑˚
 110   1        while(*str!='\0')
 111   1        { 
 112   2          LCD_write_data(*str);      //¡ÌÕ‚“ª÷÷–¥∑®LCD_write_data(*str++)’‚––”Ôæ‰÷–∂‘÷∏’Î str µƒ≤Ÿ◊˜¥Ûº““ª∂®“™¿Ì
             -Ω‚Õ∏≥π£¨œ»∞— str÷∏œÚµƒ ˝æ›»°≥ˆ¿¥”√£¨»ª∫Û str ‘Ÿº” 1 “‘÷∏œÚœ¬“ª∏ˆ ˝æ›£¨’‚ «∑«≥£≥£”√µƒ“ª÷÷ºÚ–¥∑Ω Ω
 113   2          str++;
C51 COMPILER V9.02   LCD1602                                                               04/02/2022 12:21:45 PAGE 3   

 114   2        }
 115   1      }
 116          
 117          
 118          /*-------------------------------------- 
 119          ;ƒ£øÈ√˚≥∆:delay_n10us(); 
 120          ;π¶    ƒ‹:—” ±∫Ø ˝£¨—” ±‘ºn∏ˆ10us
 121          ;–ﬁ∏ƒ»’∆⁄:2022.02.26
 122          ;–ﬁ∏ƒÀµ√˜:–ﬁ∏ƒŒ™Ωœæ´»∑µƒ—” ±∫Ø ˝,"_nop_()"—” ±1us@12Mæß’Ò,¥˙±Ì‘À––“ª∏ˆª˙∆˜÷‹∆⁄°£»Áπ˚’‚∏ˆµ•∆¨ª˙µƒæß’Ò «12Mµ
             -ƒ£¨ƒ«√¥’‚µ˜¥˙¬Îª·‘À––1US£ª
 123          ;-------------------------------------*/
 124          void delay_n10us(uint n)  //—” ±n∏ˆ10us@12Mæß’Ò
 125          {       
 126   1              uint i;           
 127   1              for(i=n;i>0;i--)    
 128   1              {
 129   2              _nop_();_nop_();_nop_();_nop_();_nop_();_nop_(); 
 130   2                      }
 131   1      }                                    
 132          //*********************µ⁄“ª≤ø∑÷LCD1602…Ë÷√ END****************************************
 133          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    198    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
